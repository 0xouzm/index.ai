# Index.ai 产品需求文档 (PRD) —— AI 垂直门户版

## 1. 产品定位

- **品牌定义**：中性、工具化的垂直领域索引门户
- **设计风格**：回归 Web 1.0（如早期 Yahoo、搜狐），高信息密度、文字链为主、无冗余动画
- **核心逻辑**：通过 AI 对垂直领域的信源进行「自动化策展」，将杂乱的互联网信息流转化为结构化的知识档案

---

## 2. 核心架构：两级目录 + 互动层

| 频道 (Channel) | 精选集 (Collection) | 互动组件 (Interactive) |
|----------------|---------------------|------------------------|
| 编程/AI | 模型架构、工程实践、工具链 | 频道 BBS、代码片段分享 |
| 环球旅行 | 政策档案、深度路书、节点攻略 | 避坑评价、实时路况留言 |
| 硬核健身 | 训练协议、营养科学、人体力学 | 训练打卡区、动作矫正讨论 |
| 干净饮食 | 论文综述、成分分析、食谱档案 | 品牌黑红榜评论、成分讨论 |

---

## 3. NotebookLM 核心实现细节

为了保证「门户」不只是链接的堆砌，每个「精选集」内部嵌入了 NotebookLM 式的深度交互容器：

### 3.1 信源约束 (Source Grounding)

AI 回答策略采用**分层降级**机制：

```
1. 优先检索档案库 → 命中则回答，标注来源文档
                 ↓ 未命中
2. 明确提示用户「档案库无相关内容，以下为网络查询结果」
                 ↓
3. 联网检索 + AI 总结，标注「来源：Web」
```

用户始终知道答案从哪来，信任感不会被破坏。

### 3.2 三栏式交互

- **左侧**：门户原始档案列表（PDF、网页）
- **中间**：AI 研讨区，支持对档案发起提问
- **右侧**：自动生成的知识图谱或摘要

### 3.3 音频/视频概览

门户自动为每个精选集生成周期性的「音频快报」，用户可以在通勤时听完该频道本周的精华。

---

## 4. 评论区：Web 1.0 风格 BBS

回归门户网站，评论区不仅是吐槽，更是知识的补全。

- **全局评论**：在精选集（如「DeepSeek 论文集」）下方的通用 BBS 区域，讨论该领域的整体趋势
- **AI 辅助审核与总结**：AI 会自动提取评论区的高质量洞见（UGC），并将其反哺到精选集的「摘要」中

> ⚠️ 行间评论 (Annotation) 功能暂不实现，避免破坏「静态、有序」的阅读体验，后续根据用户反馈再考虑。

---

## 5. 变现途径 (Monetization)

### MVP 阶段：知识包一次性买断

用户单次购买即可永久获得某个精选集的完整访问权 + AI 交互权。

示例：「2025 年巴厘岛数字游民完整档案包」

### 后续扩展（非 MVP）

- 垂直行业订阅 (B/C端)
- 「脱水」周报推送
- 传统门户广告位

---

## 6. 核心竞争力 (The Moat)

- **索引的确定性**：避开全网搜索的噪音，只提供「被 AI 验证过的精选链接」
- **整理即创造**：门户不仅仅是搬运，而是通过 AI 将 100 份文档转化为 1 个可交互的知识库
- **极简效率**：针对厌恶现代社交媒体瀑布流的用户，提供一种「静态、有序、可检索」的阅读环境

---

## 7. MVP 技术架构

### 7.1 整体架构

```
┌─────────────────────────────────────────────────────────────┐
│                     Index.ai RAG Core                       │
├─────────────┬─────────────┬─────────────┬──────────────────┤
│  Ingestion  │  Retrieval  │ Generation  │   Knowledge      │
│    Layer    │    Layer    │   Layer     │   Graph Layer    │
├─────────────┼─────────────┼─────────────┼──────────────────┤
│ PDF/HTML    │ Embedding   │ LLM + 信源  │ 实体抽取         │
│ 解析 → 分块 │ + BM25 混合 │ Citation    │ 关系构建         │
└─────────────┴─────────────┴─────────────┴──────────────────┘
```

### 7.2 技术选型

| 层 | 选型 | 说明 |
|---|---|---|
| 后端 | Python + FastAPI | 使用 `uv` 管理，强类型 |
| 前端 | Next.js 15 + React 19 + Tailwind v4 | Web 1.0 风格 UI |
| 关系数据库 | PostgreSQL | 存储频道/精选集/文档元数据 |
| 向量数据库 | Qdrant | 单 Collection + namespace 过滤 |
| LLM | Claude API | 生成层 |
| Embedding | OpenAI `text-embedding-3-large` | 向量化 |

### 7.3 数据模型

```
Channel (频道)
  ├── id
  ├── name: "编程/AI"
  ├── slug: "programming-ai"
  └── collections[]

Collection (精选集)
  ├── id
  ├── channel_id (FK)
  ├── name: "DeepSeek 论文集"
  ├── vector_namespace: "prog-ai_deepseek"
  └── documents[]

Document (档案)
  ├── id
  ├── collection_id (FK)
  ├── source_type: "pdf" | "url" | "markdown"
  ├── source_url
  ├── raw_content
  └── chunks[]

Chunk (文档块)
  ├── id
  ├── document_id (FK)
  ├── content
  ├── embedding_vector
  └── metadata: { page, section, ... }
```

### 7.4 分阶段落地

| 阶段 | 内容 |
|------|------|
| Phase 1 | 核心 RAG：文档摄入 → 向量检索 → LLM 生成（带 Citation） |
| Phase 2 | 检索增强：BM25 混合检索 + Reranker 重排序 |
| Phase 3 | 知识图谱 + 音频快报生成 |

---

## 8. MVP 范围确认

| 功能 | MVP | 后续 |
|------|-----|------|
| 多频道支持 | ✅ | - |
| 三栏式交互 | ✅ | - |
| 信源约束 + 降级联网 | ✅ | - |
| 全局 BBS 评论 | ✅ | - |
| 知识包买断 | ✅ | - |
| 行间评论 | ❌ | 待定 |
| 订阅制 | ❌ | Phase 2 |
| 音频快报 | ❌ | Phase 3 |
| 知识图谱可视化 | ❌ | Phase 3 |