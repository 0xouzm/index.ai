# Index.ai 产品需求文档 (PRD) —— AI 垂直门户版

## 1. 产品定位

- **品牌定义**：中性、工具化的垂直领域索引门户
- **设计风格**：回归 Web 1.0（如早期 Yahoo、搜狐），高信息密度、文字链为主、无冗余动画
- **核心逻辑**：通过 AI 对垂直领域的信源进行「自动化策展」，将杂乱的互联网信息流转化为结构化的知识档案

---

## 2. 核心架构：两级目录 + 互动层

| 频道 (Channel) | 精选集 (Collection) | 互动组件 (Interactive) |
|----------------|---------------------|------------------------|
| 编程/AI | 模型架构、工程实践、工具链 | 频道 BBS、代码片段分享 |
| 环球旅行 | 政策档案、深度路书、节点攻略 | 避坑评价、实时路况留言 |
| 硬核健身 | 训练协议、营养科学、人体力学 | 训练打卡区、动作矫正讨论 |
| 干净饮食 | 论文综述、成分分析、食谱档案 | 品牌黑红榜评论、成分讨论 |

---

## 3. NotebookLM 核心实现细节

为了保证「门户」不只是链接的堆砌，每个「精选集」内部嵌入了 NotebookLM 式的深度交互容器：

### 3.1 信源约束 (Source Grounding)

AI 回答策略采用**分层降级**机制：

```
1. 优先检索档案库 → 命中则回答，标注来源文档
                 ↓ 未命中
2. 明确提示用户「档案库无相关内容，以下为网络查询结果」
                 ↓
3. 联网检索 + AI 总结，标注「来源：Web」
```

用户始终知道答案从哪来，信任感不会被破坏。

### 3.2 三栏式交互

- **左侧**：门户原始档案列表（PDF、网页）
- **中间**：AI 研讨区，支持对档案发起提问
- **右侧**：自动生成的知识图谱或摘要

### 3.3 音频/视频概览

门户自动为每个精选集生成周期性的「音频快报」，用户可以在通勤时听完该频道本周的精华。

---

## 4. 评论区：Web 1.0 风格 BBS

回归门户网站，评论区不仅是吐槽，更是知识的补全。

- **全局评论**：在精选集（如「DeepSeek 论文集」）下方的通用 BBS 区域，讨论该领域的整体趋势
- **AI 辅助审核与总结**：AI 会自动提取评论区的高质量洞见（UGC），并将其反哺到精选集的「摘要」中

> ⚠️ 行间评论 (Annotation) 功能暂不实现，避免破坏「静态、有序」的阅读体验，后续根据用户反馈再考虑。

---

## 5. 变现途径 (Monetization)

### MVP 阶段：通行证买断（两档）

| 层级 | 范围 | 说明 |
|------|------|------|
| 全平台通行证 | 所有频道 + 所有精选集 | 一次付费，永久使用 |
| 单频道通行证 | 单个频道下所有精选集 | 适合垂直用户 |

> 不做精选集级别的单独购买，降低用户决策成本。

### 后续扩展（非 MVP）

- 订阅制（按月/年，解锁全部或某频道）
- 「脱水」周报推送
- 传统门户广告位

---

## 6. 核心竞争力 (The Moat)

- **索引的确定性**：避开全网搜索的噪音，只提供「被 AI 验证过的精选链接」
- **整理即创造**：门户不仅仅是搬运，而是通过 AI 将 100 份文档转化为 1 个可交互的知识库
- **极简效率**：针对厌恶现代社交媒体瀑布流的用户，提供一种「静态、有序、可检索」的阅读环境

---

## 7. MVP 技术架构

### 7.1 整体架构

```
┌─────────────────────────────────────────────────────────────┐
│                     Index.ai RAG Core                       │
├─────────────┬─────────────┬─────────────┬──────────────────┤
│  Ingestion  │  Retrieval  │ Generation  │   Knowledge      │
│    Layer    │    Layer    │   Layer     │   Graph Layer    │
├─────────────┼─────────────┼─────────────┼──────────────────┤
│ PDF/HTML    │ Embedding   │ LLM + 信源  │ 实体抽取         │
│ 解析 → 分块 │ + BM25 混合 │ Citation    │ 关系构建         │
└─────────────┴─────────────┴─────────────┴──────────────────┘
```

### 7.2 技术选型

| 层 | 选型 | 说明 |
|---|---|---|
| 后端 | Python + FastAPI | 使用 `uv` 管理，强类型 |
| 前端 | Next.js 15 + React 19 + Tailwind v4 | Web 1.0 风格 UI |
| 关系数据库 | PostgreSQL | 存储频道/精选集/文档元数据 |
| 向量数据库 | Qdrant | 单 Collection + namespace 过滤 |
| LLM | Claude API | 生成层 |
| Embedding | OpenAI `text-embedding-3-large` | 向量化 |

### 7.3 数据模型

```
Channel (频道)
  ├── id
  ├── name: "编程/AI"
  ├── slug: "programming-ai"
  └── collections[]

Collection (精选集)
  ├── id
  ├── channel_id (FK)
  ├── title: "DeepSeek 技术论文集"
  ├── by: "Index.ai" | "username"       ← By 谁
  ├── type: "official" | "user"         ← 官方 / 用户创建
  ├── visibility: "public" | "private"  ← 可见性
  ├── source_count: 14                  ← 来源数量
  ├── vector_namespace: "prog-ai_deepseek"
  ├── created_at
  ├── updated_at
  └── documents[]

Document (档案)
  ├── id
  ├── collection_id (FK)
  ├── source_type: "pdf" | "url" | "markdown"
  ├── source_url
  ├── raw_content
  └── chunks[]

Chunk (文档块)
  ├── id
  ├── document_id (FK)
  ├── content
  ├── embedding_vector
  └── metadata: { page, section, ... }

User (用户)
  ├── id
  ├── username
  ├── email
  ├── collections[]                     ← 用户创建的精选集
  └── purchases[]                       ← 购买记录

Purchase (购买记录)
  ├── id
  ├── user_id (FK)
  ├── scope: "platform" | "channel"     ← 买断范围
  ├── channel_id (当 scope=channel 时)
  ├── type: "one_time" | "subscription" ← 预留订阅扩展
  ├── expires_at (订阅时用)             ← 预留
  └── created_at
```

### 7.4 分阶段落地

| 阶段 | 内容 |
|------|------|
| Phase 1 | 核心 RAG：文档摄入 → 向量检索 → LLM 生成（带 Citation） |
| Phase 2 | 检索增强：BM25 混合检索 + Reranker 重排序 |
| Phase 3 | 知识图谱 + 音频快报生成 |

---

## 8. 产品心智模型

**Index.ai = AI 门户精选集**

```
┌─────────────────────────────────────────────────┐
│  未登录（游客）                                  │
│  ├── 浏览官方精选集目录                          │
│  ├── 查看精选集摘要/预览                         │
│  └── ❌ 无法使用 AI 交互                         │
├─────────────────────────────────────────────────┤
│  登录后（用户）                                  │
│  ├── 浏览 + AI 交互（需购买对应通行证）           │
│  ├── 创建自己的精选集（上传文档，私有）           │
│  └── 完整 NotebookLM 式体验                     │
└─────────────────────────────────────────────────┘
```

### 权限矩阵

| 状态 | 官方精选集 | 用户精选集 |
|------|-----------|-----------|
| 未登录 | 可浏览目录/预览 | 不可见 |
| 登录（未购买） | 可浏览，无 AI 交互 | 可创建/使用自己的 |
| 登录（已购买） | 完整 AI 交互 | — |

---

## 9. 内容来源策略（冷启动）

### 官方精选集：仅使用开放内容

| 类型 | 来源示例 | 版权状态 |
|------|----------|----------|
| 公共领域 | 经典文学、历史文献 | ✅ 无风险 |
| 开放许可 | arXiv、OpenStax、Our World in Data | ✅ CC 协议 |
| 官方公开资料 | 公司财报、政府文件、技术博客 | ✅ 公开发布 |

### 各频道可用来源

| 频道 | 开放来源 |
|------|----------|
| 编程/AI | arXiv 论文、GitHub 开源文档、官方技术博客（Anthropic/OpenAI/DeepSeek）、RFC 文档 |
| 环球旅行 | 各国政府签证政策、领事馆公告、开放旅游数据 |
| 硬核健身 | PubMed 公开摘要、WHO/CDC 指南、公开学术研究 |
| 干净饮食 | FDA 文件、USDA 营养成分数据库、开放期刊 |

### 用户精选集：UGC 模式

- 用户可上传自己的文档，创建私有精选集
- 版权责任在用户侧
- 功能与 NotebookLM 一致

---

## 10. MVP 范围确认

| 功能 | MVP | 后续 |
|------|-----|------|
| 多频道支持 | ✅ | - |
| 三栏式交互 | ✅ | - |
| 信源约束 + 降级联网 | ✅ | - |
| 全局 BBS 评论 | ✅ | - |
| 通行证买断（全平台/单频道） | ✅ | - |
| 用户登录/注册 | ✅ | - |
| 用户私有精选集（UGC） | ✅ | - |
| 官方精选集（开放内容） | ✅ | - |
| 行间评论 | ❌ | 待定 |
| 订阅制 | ❌ | 后续 |
| 音频快报 | ❌ | Phase 3 |
| 知识图谱可视化 | ❌ | Phase 3 |